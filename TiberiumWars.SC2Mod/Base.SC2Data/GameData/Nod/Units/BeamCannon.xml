<?xml version="1.0" encoding="utf-8"?>
<Catalog>
    <CEffectDamage default="1" id="NodBeamCannonWeaponDamage" parent="DU_WEAP">
        <EditorCategories value="Race:Nod"/>
        <Kind value="Ranged"/>
        <Death value="Fire"/>
        <KindSplash value="Ranged"/>
        <Amount value="3"/>
        <SearchFilters value="-;Player,Ally,Missile,Stasis,Dead,Hidden,Invulnerable"/>
        <SearchFlags index="OffsetByUnitRadius" value="0"/>
        <SearchFlags index="SameCliff" value="0"/>
    </CEffectDamage>
    <CEffectCreatePersistent id="ObeliskChargeCP">
        <EditorCategories value="Race:Nod"/>
        <PeriodicEffectArray value="ObeliskChargeAP"/>
        <PeriodicPeriodArray value="1"/>
        <ValidatorArray value="isObelisk"/>
        <PeriodCount value="1"/>
        <WhichLocation Value="TargetUnit"/>
        <Flags index="Channeled" value="1"/>
    </CEffectCreatePersistent>
    <CEffectApplyBehavior id="ObeliskChargeAP">
        <EditorCategories value="Race:Nod"/>
        <Behavior value="ObeliskCharge"/>
        <ValidatorArray index="0" value="isObelisk"/>
    </CEffectApplyBehavior>
    <CEffectDamage id="BeamCannonDistantAttackDummy" parent="DU_WEAP_MISSILE">
        <EditorCategories value="Race:Zerg"/>
        <ValidatorArray value="BeamCannonDistantAttackTargetFilters"/>
        <ValidatorArray value="VenomInBeamFocusRangeSource"/>
        <ValidatorArray value="VenomInBeamFocusRangeTarget"/>
    </CEffectDamage>
    <!-- <CEffectCreatePersistent id="VenomBeamRetargetChargeCP">
        <EditorCategories value="Race:Nod"/>
        <PeriodicEffectArray value="BeamCannonVenomChargeAP"/>
        <PeriodicPeriodArray value="0.25"/>
        <ValidatorArray value="IsBeamReflector"/>
        <ValidatorArray value="BeamCannonVenomCharged"/>
        <PeriodicValidator value="BeamCannonReflectorWorks"/>
        <WhichLocation Value="TargetUnit"/>
        <Flags index="Channeled" value="1"/>
        <Flags index="PersistUntilDestroyed" value="1"/>
        <InitialEffect value="BeamCannonReflectorActive"/>
        <FinalEffect value="BeamCannonReflectorActiveRB"/>
    </CEffectCreatePersistent>
    <CEffectCreatePersistent id="BeamCannonVenomChargeCP">
        <EditorCategories value="Race:Nod"/>
        <PeriodicEffectArray value="BeamCannonVenomChargeAP"/>
        <PeriodicPeriodArray value="0.25"/>
        <ValidatorArray value="IsBeamReflector"/>
        <PeriodicValidator value="BeamCannonReflectorActive"/>
        <WhichLocation Value="TargetUnit"/>
        <Flags index="Channeled" value="1"/>
        <Flags index="PersistUntilDestroyed" value="1"/>
        <InitialEffect value="BeamCannonReflectorActive"/>
        <FinalEffect value="BeamCannonReflectorActiveRB"/>
    </CEffectCreatePersistent>
    <CEffectCreatePersistent id="BeamCannonFocusChargeCP">
        <EditorCategories value="Race:Nod"/>
        <PeriodicEffectArray value="BeamCannonVenomChargeAP"/>
        <PeriodicPeriodArray value="0.25"/>
        <ValidatorArray value="IsBeamCannonFocus"/>
        <ValidatorArray value="BeamCannonFocusTargetFilters"/>
        <PeriodicValidator value="BeamCannonReflectorActive"/>
        <WhichLocation Value="TargetUnit"/>
        <Flags index="Channeled" value="1"/>
        <Flags index="PersistUntilDestroyed" value="1"/>
        <InitialEffect value="BeamCannonReflectorActive"/>
        <FinalEffect value="BeamCannonReflectorActiveRB"/>
    </CEffectCreatePersistent> -->
    <!-- <CEffectSet id="BeamCannonFocusFate"> -->
    <!-- <ValidatorArray value="BeamCannonVenomNotCharged"/> -->
    <!-- <ValidatorArray value="IsBeamCannonFocus"/> -->
    <!-- <EffectArray value="SuicideRemove"/> -->
    <!-- </CEffectSet> -->
    <CEffectApplyBehavior id="BeamCannonReflectorActive"/>
    <CEffectRemoveBehavior id="BeamCannonReflectorActiveRB">
        <BehaviorLink value="BeamCannonReflectorActive"/>
    </CEffectRemoveBehavior>
    <CEffectSwitch id="NodBeamCannonWeaponDamageSwitch">
        <CaseArray Validator="BeamCannonLevel10" Effect="NodBeamCannonWeaponDamage10"/>
        <CaseArray Validator="BeamCannonLevel9" Effect="NodBeamCannonWeaponDamage9"/>
        <CaseArray Validator="BeamCannonLevel8" Effect="NodBeamCannonWeaponDamage8"/>
        <CaseArray Validator="BeamCannonLevel7" Effect="NodBeamCannonWeaponDamage7"/>
        <CaseArray Validator="BeamCannonLevel6" Effect="NodBeamCannonWeaponDamage6"/>
        <CaseArray Validator="BeamCannonLevel5" Effect="NodBeamCannonWeaponDamage5"/>
        <CaseArray Validator="BeamCannonLevel4" Effect="NodBeamCannonWeaponDamage4"/>
        <CaseArray Validator="BeamCannonLevel3" Effect="NodBeamCannonWeaponDamage3"/>
        <CaseArray Validator="BeamCannonLevel2" Effect="NodBeamCannonWeaponDamage2"/>
        <CaseDefault value="NodBeamCannonWeaponDamage1"/>
    </CEffectSwitch>
    <CEffectDamage id="NodBeamCannonWeaponDamage10" parent="NodBeamCannonWeaponDamage">
        <Amount value="30"/>
    </CEffectDamage>
    <CEffectDamage id="NodBeamCannonWeaponDamage9" parent="NodBeamCannonWeaponDamage">
        <Amount value="27"/>
    </CEffectDamage>
    <CEffectDamage id="NodBeamCannonWeaponDamage8" parent="NodBeamCannonWeaponDamage">
        <Amount value="24"/>
    </CEffectDamage>
    <CEffectDamage id="NodBeamCannonWeaponDamage7" parent="NodBeamCannonWeaponDamage">
        <Amount value="21"/>
    </CEffectDamage>
    <CEffectDamage id="NodBeamCannonWeaponDamage6" parent="NodBeamCannonWeaponDamage">
        <Amount value="18"/>
    </CEffectDamage>
    <CEffectDamage id="NodBeamCannonWeaponDamage5" parent="NodBeamCannonWeaponDamage">
        <Amount value="15"/>
    </CEffectDamage>
    <CEffectDamage id="NodBeamCannonWeaponDamage4" parent="NodBeamCannonWeaponDamage">
        <Amount value="12"/>
    </CEffectDamage>
    <CEffectDamage id="NodBeamCannonWeaponDamage3" parent="NodBeamCannonWeaponDamage">
        <Amount value="9"/>
    </CEffectDamage>
    <CEffectDamage id="NodBeamCannonWeaponDamage2" parent="NodBeamCannonWeaponDamage">
        <Amount value="6"/>
    </CEffectDamage>
    <CEffectDamage id="NodBeamCannonWeaponDamage1" parent="NodBeamCannonWeaponDamage"/>
    <CEffectDamage id="NodBeamCannonWeaponDamageDelay" parent="DU_WEAP"/>
    <CEffectApplyBehavior id="BeamCannonVenomChargeAP">
        <EditorCategories value="Race:Nod"/>
        <Behavior value="BeamCannonVenomCharged"/>
        <!-- <ValidatorArray index="0" value="IsBeamReflector"/> -->
    </CEffectApplyBehavior>
    <CAbilEffectTarget id="ObeliskCharge">
        <EditorCategories value="AbilityorEffectType:Units,Race:Nod"/>
        <Effect index="0" value="ObeliskChargeCP"/>
        <Range value="5"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="NodChargeDefenses"/>
        <!-- Requirements="ObeliskCharge"/> -->
        <Flags index="AutoCast" value="1"/>
        <Flags index="AutoCastOn" value="1"/>
        <Cost>
            <Cooldown TimeUse="1"/>
        </Cost>
        <SmartValidatorArray value="isObelisk"/>
        <AutoCastValidatorArray value="isObelisk"/>
        <AutoCastRange value="5"/>
        <AutoCastFilters value="Visible;Neutral,Enemy"/>
    </CAbilEffectTarget>
    <CAbilEffectTarget id="BeamCannonVenomCharge">
        <EditorCategories value="AbilityorEffectType:Units,Race:Nod"/>
        <Effect index="0" value="BeamCannonVenomChargeCP"/>
        <Range value="11"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="NodEnergize"/>
        <Cost>
            <Cooldown TimeUse="1"/>
        </Cost>
    </CAbilEffectTarget>
    <CAbilEffectTarget id="BeamCannonFocusCharge">
        <EditorCategories value="AbilityorEffectType:Units,Race:Nod"/>
        <Effect index="0" value="BeamCannonFocusChargeCP"/>
        <Range value="11"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="NodEnergize"/>
        <Cost>
            <Cooldown TimeUse="1"/>
        </Cost>
        <SmartValidatorArray value="IsBeamCannonFocus"/>
        <SmartValidatorArray value="BeamCannonFocusTargetFilters"/>
    </CAbilEffectTarget>
    <CAbilEffectTarget id="VenomBeamRetargetCharge">
        <EditorCategories value="AbilityorEffectType:Units,Race:Nod"/>
        <Effect index="0" value="VenomBeamRetargetChargeCP"/>
        <Range value="11"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="NodEnergize"/>
        <Cost>
            <Cooldown TimeUse="1"/>
        </Cost>
    </CAbilEffectTarget>
    <CAbilEffectTarget id="BeamCannonDistantAttackFinal">
        <Effect index="0" value="BeamCannonDistantAttackCPFinal"/>
        <Flags index="DeferCooldown" value="1"/>
        <Cost>
            <Cooldown TimeUse="1"/>
        </Cost>
        <TargetFilters value="Visible;Self,Missile,Stasis,Dead,Hidden,Invulnerable"/>
        <Range value="11"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="NodBeamReflector"/>
    </CAbilEffectTarget>
    <CAbilEffectTarget id="BeamCannonDistantAttack">
        <Effect index="0" value="BeamCannonDistantAttackDummy"/>
        <Flags index="DeferCooldown" value="1"/>
        <Cost>
            <Cooldown TimeUse="1"/>
        </Cost>
        <TargetFilters value="Visible;Self,Missile,Stasis,Dead,Hidden,Invulnerable"/>
        <Range value="999"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="NodBeamReflector"/>
    </CAbilEffectTarget>
    <CValidatorCombine id="BeamCannonReflectorWorks">
        <Type value="And"/>
        <CombineArray value="BeamCannonVenomCharged"/>
        <CombineArray value="BeamCannonReflectorActive"/>
    </CValidatorCombine>
    <CValidatorCombine id="BeamCannonReflectorWorksFinal">
        <Type value="And"/>
        <CombineArray value="BeamCannonVenomCharged"/>
        <CombineArray value="BeamCannonDistantAttackTargetFilters"/>
    </CValidatorCombine>
    <CValidatorUnitCompareBehaviorCount id="BeamCannonLevel" deafult="1">
        <Behavior value="BeamCannonVenomCharged"/>
        <WhichUnit Value="Caster"/>
        <!-- <WhichUnit Value="Source"/> -->
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="BeamCannonLevel10" parent="BeamCannonLevel">
        <Value value="10"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="BeamCannonLevel9" parent="BeamCannonLevel">
        <Value value="9"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="BeamCannonLevel8" parent="BeamCannonLevel">
        <Value value="8"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="BeamCannonLevel7" parent="BeamCannonLevel">
        <Value value="7"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="BeamCannonLevel6" parent="BeamCannonLevel">
        <Value value="6"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="BeamCannonLevel5" parent="BeamCannonLevel">
        <Value value="5"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="BeamCannonLevel4" parent="BeamCannonLevel">
        <Value value="4"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="BeamCannonLevel3" parent="BeamCannonLevel">
        <Value value="3"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="BeamCannonLevel2" parent="BeamCannonLevel">
        <Value value="2"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="BeamCannonLevel1" parent="BeamCannonLevel">
        <Value value="1"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="BeamCannonLevel0" parent="BeamCannonLevel"/>
    <CValidatorUnitCompareBehaviorCount id="BeamCannonVenomCharged">
        <ResultFailed value="Error,Error/VenomNodChargedByCannonBeam"/>
        <Compare value="GT"/>
        <Behavior value="BeamCannonVenomCharged"/>
        <WhichUnit Value="Caster"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="BeamCannonVenomNotCharged">
        <Behavior value="BeamCannonVenomCharged"/>
        <WhichUnit Value="Caster"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="BeamCannonReflectorActive">
        <ResultFailed value="Error,Error/BeamCannonReflectorNotActive"/>
        <Compare value="GT"/>
        <Behavior value="BeamCannonReflectorActive"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitType id="IsBeamReflectorCaster">
        <ResultFailed value="Error,Error/NoReflectorNearCaster"/>
        <Value value="NodVenom"/>
    </CValidatorUnitType>
    <CValidatorUnitType id="IsBeamReflectorTarget">
        <ResultFailed value="Error,Error/NoReflectorNearTarget"/>
        <Value value="NodVenom"/>
    </CValidatorUnitType>
    <CValidatorUnitType id="IsNodVenom">
        <Value value="NodVenom"/>
    </CValidatorUnitType>
    <CValidatorUnitType id="IsBeamCannonFocus">
        <Value value="BeamCannonFocus"/>
    </CValidatorUnitType>
    <CValidatorCombine id="IsBeamReflector">
        <ResultFailed value="Error,Error/ShouldTargetVenom"/>
        <CombineArray value="IsNodVenom"/>
    </CValidatorCombine>
    <CValidatorLocationEnumArea id="VenomInBeamFocusRangeSource">
        <ResultFailed value="CantFindEnoughTargets"/>
        <WhichLocation Value="SourceUnit"/>
        <AreaArray>
            <Compare value="GE"/>
            <Count value="1"/>
            <Radius value="11"/>
            <Validator value="IsBeamReflectorCaster"/>
        </AreaArray>
        <SearchFlags index="ExtendByUnitRadius" value="1"/>
        <SearchFilters value="Air,Visible;Self,Ally,Neutral,Enemy,Structure,Missile,Dead,Hidden"/>
    </CValidatorLocationEnumArea>
    <CValidatorLocationEnumArea id="VenomInBeamFocusRangeTarget">
        <ResultFailed value="CantFindEnoughTargets"/>
        <WhichLocation Value="TargetUnit"/>
        <AreaArray>
            <Compare value="GE"/>
            <Count value="1"/>
            <Radius value="11"/>
            <Validator value="IsBeamReflectorTarget"/>
        </AreaArray>
        <SearchFlags index="ExtendByUnitRadius" value="1"/>
        <SearchFilters value="Air,Visible;Self,Ally,Neutral,Enemy,Structure,Missile,Dead,Hidden"/>
    </CValidatorLocationEnumArea>
    <CValidatorUnitFilters id="BeamCannonDistantAttackTargetFilters">
        <Filters value="Visible;Self,Missile,Stasis,Dead,Hidden,Invulnerable"/>
    </CValidatorUnitFilters>
    <CValidatorUnitFilters id="BeamCannonFocusTargetFilters">
        <Filters value="Visible;Self,Missile,Stasis,Dead,Hidden"/>
    </CValidatorUnitFilters>
    <!-- <CActorAction id="BeamWeaponCC3Attack" parent="GenericAttack" effectAttack="NodBeamCannonWeaponDamage">
        <LaunchAssets Sound="BeamWeaponCC3_AttackLaunch"/>
        <BeamScope value="Caster"/>
        <ImpactSiteOps Ops="SOpAttachHarness SOpAttachVolumeNoVizEnhance VoidRaySOpForwardLaunch"/>
        <ImpactMap index="None" Model="" Sound="HC_AttackImpact"/>
        <ActionFlags index="ImpactMonitorsTeleports" value="1"/>
    </CActorAction>
    <CActorBeamSimple id="BeamWeaponCC3AttackBeam" parent="BeamSimpleAnimationStyleOneShot">
        <Macros value="ActionTargetTeleportDestroy"/>
        <On Terms="ActorCreation; ValidateUnit NoDarkProtoss" Send="ModelSwap DarkArchonAttackBeam"/>
        <On Terms="ActorCreation; ValidateUnit NoDarkProtoss" Send="AnimBracketStart BSDb Birth Stand Death ContentPlayOnce"/>
        <On Terms="AnimBracketState.*.AfterClosing; AnimName BSDb" Send="Destroy"/>
        <Model value="BeamWeaponCC3CC3AttackBeam"/>
        <Scale value="0.500000"/>
    </CActorBeamSimple> -->
    <!-- <CActorAction id="BeamCannonDistantAttack" parent="GenericAttack" effectAttack="BeamCannonDistantAttackDamage">
        <LaunchAttachQuery Methods="AMFilterWeapon03"/>
        <LaunchAssets Sound="BeamWeaponCC3_AttackLaunch"/>
        <ImpactMap index="None" Model="RedeemerAttackBeamImpact" Sound="RedeemerAttackImpact" ModelReaction="RedeemerAttackImpactReaction"/>
        <ImpactMap index="Shield" Sound="RedeemerAttackImpactShield" ModelReaction="RedeemerAttackImpactReactionShield"/>
        <ImpactPhysics Name="RailgunImpact" MatchKeys="Basic" Physics="CNCRailgunAttackDeathForce"/>
    </CActorAction> -->
    <!-- <CActorBeamSimple id="BeamCannonDistantAttackBeam" parent="BeamSimpleAnimationStyleOneShot">
        <Macros value="ActionTargetTeleportDestroy"/>
        <On Terms="ActorCreation; ValidateUnit NoDarkProtoss" Send="ModelSwap DarkArchonAttackBeam"/>
        <On Terms="ActorCreation; ValidateUnit NoDarkProtoss" Send="AnimBracketStart BSDb Birth Stand Death ContentPlayOnce"/>
        <On Terms="AnimBracketState.*.AfterClosing; AnimName BSDb" Send="Destroy"/>
        <Model value="BeamWeaponCC3CC3AttackBeam"/>
        <Scale value="0.500000"/>
    </CActorBeamSimple> -->
    <CActorBeamSimple id="NodChargeBeam" parent="BeamSimpleAnimationStyleContinuous">
        <Inherits index="Visibility" value="1"/>
        <On Terms="Effect.ObeliskChargeCP.Start" Send="Create"/>
        <On Terms="Effect.ObeliskChargeCP.Stop" Send="Destroy"/>
        <HostForProps Subject="_Unit" Scope="Caster" Actor="Find"/>
        <HostLaunch Subject="_Unit" Scope="Caster" Actor="Find"/>
        <HostLaunchSiteOps Ops="SOpAttachWeapon"/>
        <HostImpact Subject="_Unit" Scope="Target" Actor="Find"/>
        <HostImpactSiteOps Ops="SOpAttachCenter"/>
    </CActorBeamSimple>
    <CActorBeamSimple id="NodDistantAttackChargeBeam" parent="BeamSimpleAnimationStyleContinuous">
        <Inherits index="Visibility" value="1"/>
        <On Terms="Effect.BeamCannonVenomChargeCP.Start" Send="Create"/>
        <On Terms="Effect.BeamCannonVenomChargeCP.Stop" Send="Destroy"/>
        <On Terms="Effect.VenomBeamRetargetChargeCP.Start" Send="Create"/>
        <On Terms="Effect.VenomBeamRetargetChargeCP.Stop" Send="Destroy"/>
        <On Terms="Effect.BeamCannonDistantAttackCPFinal.Start" Send="Create"/>
        <On Terms="Effect.BeamCannonDistantAttackCPFinal.Stop" Send="Destroy"/>
        <!-- <On Terms="Effect.BeamCannonAttackCP.Start" Send="Create"/>
        <On Terms="Effect.BeamCannonAttackCP.Stop" Send="Destroy"/> -->


        <On Terms="Effect.BeamCannonTargetTrackerATU.Start" Send="Create"/>
        <On Terms="Effect.BeamCannonTargetTrackerRTU.Start" Send="Destroy"/>
        <!-- <On Terms="Effect.BeamCannonAttackCP.Stop" Send="Destroy"/> -->



        <On Terms="Effect.BeamCannonFocusChargeCP.Start" Send="Create"/>
        <On Terms="Effect.BeamCannonFocusChargeCP.Stop" Send="Destroy"/>
        <On Terms="Effect.NodBeamCannonWeaponDamage10.Start" Send="ModelSwap BeamWeaponCC3CC3AttackBeam10"/>
        <On Terms="Effect.NodBeamCannonWeaponDamage9.Start" Send="ModelSwap BeamWeaponCC3CC3AttackBeam9"/>
        <On Terms="Effect.NodBeamCannonWeaponDamage8.Start" Send="ModelSwap BeamWeaponCC3CC3AttackBeam8"/>
        <On Terms="Effect.NodBeamCannonWeaponDamage7.Start" Send="ModelSwap BeamWeaponCC3CC3AttackBeam7"/>
        <On Terms="Effect.NodBeamCannonWeaponDamage6.Start" Send="ModelSwap BeamWeaponCC3CC3AttackBeam6"/>
        <On Terms="Effect.NodBeamCannonWeaponDamage5.Start" Send="ModelSwap BeamWeaponCC3CC3AttackBeam5"/>
        <On Terms="Effect.NodBeamCannonWeaponDamage4.Start" Send="ModelSwap BeamWeaponCC3CC3AttackBeam4"/>
        <On Terms="Effect.NodBeamCannonWeaponDamage3.Start" Send="ModelSwap BeamWeaponCC3CC3AttackBeam3"/>
        <On Terms="Effect.NodBeamCannonWeaponDamage2.Start" Send="ModelSwap BeamWeaponCC3CC3AttackBeam2"/>
        <On Terms="Effect.NodBeamCannonWeaponDamage1.Start" Send="ModelSwap BeamWeaponCC3CC3AttackBeam1"/>
        <HostForProps Subject="_Unit" Scope="Caster" Actor="Find"/>
        <HostLaunch Subject="_Unit" Scope="Caster" Actor="Find"/>
        <HostLaunchSiteOps Ops="SOpAttachWeapon"/>
        <HostImpact Subject="_Unit" Scope="Target" Actor="Find"/>
        <HostImpactSiteOps Ops="SOpAttachCenter"/>
        <Model value="BeamWeaponCC3CC3AttackBeam"/>
    </CActorBeamSimple>
    <CActorUnit id="BeamCannonFocus" parent="NodUnitBase" wireframe="NodBeamWireframe" unitName="BeamCannonFocus" icon="NodBeam">
        <Model value="StormSphereAttachment"/>
        <MinimapIconScale value="0.000000"/>
        <On Terms="ActorCreation" Send="SetCastShadows"/>
        <!-- <Model value="Invisible"/> -->
    </CActorUnit>
    <CModel id="BeamWeaponCC3CC3AttackBeam" parent="PersistentSpellFX">
        <ScaleMax value="0.500000,0.500000,0.500000"/>
        <ScaleMin value="0.500000,0.500000,0.500000"/>
        <Model value="Assets\Effects\Protoss\Alarak_COOP_LightningStrikes_Beam\Alarak_COOP_LightningStrikes_Beam.m3"/>
        <AnimSpeed value="4.000000"/>
        <EditorCategories value="Race:Nod"/>
        <RadiusLoose value="1.000000"/>
    </CModel>
    <CModel id="BeamWeaponCC3CC3AttackBeam2" parent="BeamWeaponCC3CC3AttackBeam">
        <ScaleMax value="0.700000,0.700000,0.700000"/>
        <ScaleMin value="0.700000,0.700000,0.700000"/>
    </CModel>
    <CModel id="BeamWeaponCC3CC3AttackBeam3" parent="BeamWeaponCC3CC3AttackBeam">
        <ScaleMax value="0.850000,0.850000,0.850000"/>
        <ScaleMin value="0.850000,0.850000,0.850000"/>
    </CModel>
    <CModel id="BeamWeaponCC3CC3AttackBeam4" parent="BeamWeaponCC3CC3AttackBeam">
        <ScaleMax value="1.000000,1.000000,1.000000"/>
        <ScaleMin value="1.000000,1.000000,1.000000"/>
    </CModel>
    <CModel id="BeamWeaponCC3CC3AttackBeam5" parent="BeamWeaponCC3CC3AttackBeam">
        <ScaleMax value="1.100000,1.100000,1.100000"/>
        <ScaleMin value="1.100000,1.100000,1.100000"/>
    </CModel>
    <CModel id="BeamWeaponCC3CC3AttackBeam6" parent="BeamWeaponCC3CC3AttackBeam">
        <ScaleMax value="1.200000,1.200000,1.200000"/>
        <ScaleMin value="1.200000,1.200000,1.200000"/>
    </CModel>
    <CModel id="BeamWeaponCC3CC3AttackBeam7" parent="BeamWeaponCC3CC3AttackBeam">
        <ScaleMax value="1.300000,1.300000,1.300000"/>
        <ScaleMin value="1.300000,1.300000,1.300000"/>
    </CModel>
    <CModel id="BeamWeaponCC3CC3AttackBeam8" parent="BeamWeaponCC3CC3AttackBeam">
        <ScaleMax value="1.400000,1.400000,1.400000"/>
        <ScaleMin value="1.400000,1.400000,1.400000"/>
    </CModel>
    <CModel id="BeamWeaponCC3CC3AttackBeam9" parent="BeamWeaponCC3CC3AttackBeam">
        <ScaleMax value="1.500000,1.500000,1.500000"/>
        <ScaleMin value="1.500000,1.500000,1.500000"/>
    </CModel>
    <CModel id="BeamWeaponCC3CC3AttackBeam10" parent="BeamWeaponCC3CC3AttackBeam">
        <ScaleMax value="1.600000,1.600000,1.600000"/>
        <ScaleMin value="1.600000,1.600000,1.600000"/>
    </CModel>
    <CWeaponLegacy id="NodBeamCannonWeapon" parent="NodWeapon" icon="FXNod_LasersAddonUpgrade">
        <Options index="OnlyFireWhileInAttackOrder" value="0"/>
        <Options index="OnlyFireAtAttackOrderTarget" value="0"/>
        <DisplayEffect value="NodBeamCannonWeaponDamage1"/>
        <TargetFilters value="Visible;Missile,Stasis,Dead,Hidden,Invulnerable"/>
        <Range value="11"/>
        <TeleportResetRange value="0"/>
        <Period value="0.25"/>
        <Effect value="BeamCannonAttackCP"/>
        <!-- <AllowedMovement value="Moving"/> -->
    </CWeaponLegacy>
    <CUnit id="BeamCannonFocus" parent="Marine">
        <FlagArray index="Invulnerable" value="1"/>
        <Height value="1"/>
        <AbilArray Link="VenomBeamRetargetCharge"/>
        <AbilArray Link="BeamCannonDistantAttackFinal"/>
        <BehaviorArray Link="BeamCannonTargetTracker"/>
        <CardLayouts>
            <LayoutButtons Face="NodBeamReflector" Type="AbilCmd" AbilCmd="VenomBeamRetargetCharge,Execute" Row="2" Column="1"/>
            <LayoutButtons Face="NodBeamReflector" Type="AbilCmd" AbilCmd="BeamCannonDistantAttackFinal,Execute" Row="2" Column="2"/>
        </CardLayouts>
    </CUnit>
    <CBehaviorBuff id="BeamCannonReflectorActive">
        <!-- <Duration value="1"/> -->
    </CBehaviorBuff>
    <CBehaviorBuff id="BeamCannonVenomCharged">
        <InfoIcon value="Assets\icons\SpiderTankIcon.dds"/>
        <EditorCategories value="Race:Nod,AbilityorEffectType:Structures"/>
        <MaxStackCount value="10"/>
        <Duration value="0.35"/>
        <MaxStackCountPerCaster value="1"/>
    </CBehaviorBuff>




    <!-- <CEffectSet id="BeamCannonFocusChargeFinal">
        <EffectArray value="BeamCannonReflectorActiveRB"/>
        <EffectArray value="SuicideRemove"/>
    </CEffectSet> -->
    <CEffectCreatePersistent id="BeamCannonDistantAttackCPFinal">
        <WhichLocation Value="TargetUnit"/>
        <TimeScaleSource Value="Caster"/>
        <Flags index="Channeled" value="1"/>
        <Flags index="PersistUntilDestroyed" value="1"/>
        <PeriodicEffectArray value="NodBeamCannonWeaponDamageSwitch"/>
        <!-- <InitialEffect value="NodBeamCannonWeaponDamage"/> -->
        <PeriodicValidator value="BeamCannonReflectorWorksFinal"/>
        <ValidatorArray value="BeamCannonVenomCharged"/>
        <!-- <PeriodicValidator value="BeamCannonReflectorActive"/> -->
        <PeriodicPeriodArray value="0.25"/>
        <!-- <FinalEffect value="BeamCannonFocusChargeFinal"/> -->
    </CEffectCreatePersistent>


    <CEffectCreatePersistent id="BeamCannonAttackCP">
        <WhichLocation Value="TargetUnit"/>
        <TimeScaleSource Value="Caster"/>
        <Flags index="Channeled" value="1"/>
        <Flags index="PersistUntilDestroyed" value="1"/>
        <PeriodicEffectArray value="NodBeamCannonWeaponSwitch"/>
        <InitialEffect value="NodBeamCannonWeaponDamageDelay"/>
        <PeriodicPeriodArray value="0.25"/>
        <FinalEffect value="BeamCannonAttackFinalETU"/>
    </CEffectCreatePersistent>



    <CAbilEffectTarget id="CreateBeamCannonFocus">
        <Effect index="0" value="BeamCannonFocusCU"/>
        <Range value="11"/>
        <Arc value="360"/>
        <CursorEffect value="BeamCannonFocusCU"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="NodSpawnTib"/>
        <EditorCategories value="Race:Nod,AbilityorEffectType:Units"/>
    </CAbilEffectTarget>



    <CEffectCreateUnit id="BeamCannonFocusCU">
        <WhichLocation Value="TargetPoint"/>
        <SpawnEffect value="BeamCannonFocusCUSet"/>
        <SpawnUnit value="BeamCannonFocus"/>
        <!-- <RallyUnit Value="Caster"/> -->
    </CEffectCreateUnit>
    <CEffectSet id="BeamCannonFocusCUSet">
        <!-- <EffectArray value="ReaverSCBWWeapon@HallucinationScarab"/> -->
        <!-- <EffectArray value="BeamCannonFocusAttackIO"/> -->
        <EffectArray value="BeamCannonTargetTrackerATU"/>
        <EffectArray value="KillsToCaster"/>
    </CEffectSet>

    <!-- <CEffectIssueOrder id="BeamCannonFocusAttackIO">
        <Abil value="attack"/>
        <Target Effect="BeamCannonAttackCP" Value="TargetUnit"/>
        <CmdFlags index="Queued" value="1"/>
    </CEffectIssueOrder> -->


    <!-- <CAbilEffectTarget id="MoleTurnTurret">
        <EditorCategories value="Race:Genetron,AbilityorEffectType:Units"/>
        <Flags index="BestUnit" value="0"/>
        <Flags index="RequireTargetVision" value="0"/>
        <Range value="500"/>
        <Arc value="360"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="Turn"/>
        <Effect index="0" value="MoleTurnTurretCreateUnitDummy"/>
        <SmartPriority value="5"/>
        <AINotifyEffect value="MoleTurnTurretChannel"/>
    </CAbilEffectTarget> -->


    <!-- <CEffectCreateUnit id="MoleTurnTurretCreateUnitDummy">
        <EditorCategories value="Race:Genetron"/>
        <WhichLocation Value="TargetPoint"/>
        <CreateFlags index="Placement" value="0"/>
        <SpawnEffect value="MoleTurnTurretChannel"/>
        <SpawnUnit value="MoleTurnDummy"/>
    </CEffectCreateUnit>
    <CEffectCreatePersistent id="MoleTurnTurretChannel" parent="ScionCreatePersistent" Race="Genetron">
        <WhichLocation Value="TargetUnit"/>
        <Flags index="Channeled" value="1"/>
        <Flags index="PersistUntilDestroyed" value="1"/>
        <InitialDelay value="0.0625"/>
        <InitialEffect value="MoleTurnTurretSetTarget"/>
        <FinalEffect value="MoleTurnTurretAimComplete"/>
        <PeriodicValidator value="CasterAndTargetNotDead"/>
    </CEffectCreatePersistent>
    <CEffectSet id="MoleTurnTurretAimComplete" parent="ScionSet" Race="Genetron">
        <EffectArray value="MoleTurnTurretClearTarget"/>
        <EffectArray value="Kill"/>
    </CEffectSet>
    <CEffectModifyUnit id="MoleTurnTurretSetTarget">
        <EditorCategories value="Race:Genetron"/>
        <ImpactUnit Value="Caster"/>
        <ModifyTurret Turret="MoleTurretSieged" AimCompleteEffect="MoleTurnTurretAimComplete">
            <Target Effect="MoleTurnTurretChannel" Value="TargetUnit"/>
            <Flags index="Tracking" value="1"/>
        </ModifyTurret>
    </CEffectModifyUnit>
    <CEffectModifyUnit id="MoleTurnTurretClearTarget">
        <EditorCategories value="Race:Genetron"/>
        <ImpactUnit Value="Caster"/>
        <ModifyTurret Action="ClearTarget" Turret="MoleTurretSieged">
            <Target Effect="MoleTurnTurretChannel" Value="TargetUnit"/>
        </ModifyTurret>
    </CEffectModifyUnit> -->






    <CEffectEnumTrackedUnits id="BeamCannonAttackFinalETU">
        <BehaviorLink value="BeamCannonTargetTracker"/>
        <Effect value="BeamCannonAttackFinalSet"/>
        <!-- <TrackerUnit Value="Target"/> -->
    </CEffectEnumTrackedUnits>
    <CEffectEnumTrackedUnits id="BeamCannonTargetTrackerETU">
        <BehaviorLink value="BeamCannonTargetTracker"/>
        <Effect value="BeamCannonVenomChargeAP"/>
        <!-- <TrackerUnit Value="Target"/> -->
    </CEffectEnumTrackedUnits>

    
    <CEffectSet id="BeamCannonAttackFinalSet">
        <EffectArray value="SuicideRemove"/>
    </CEffectSet>

    <CEffectSwitch id="NodBeamCannonWeaponSwitch">
        <CaseArray Validator="BeamCannonTargetTrackerGT0" Effect="BeamCannonTargetTrackerETU"/>
        <CaseDefault value="NodBeamCannonWeaponDamage1"/>
    </CEffectSwitch>

    <CValidatorCompareTrackedUnitsCount id="BeamCannonTargetTrackerGT0">
        <Compare value="GT"/>
        <BehaviorLink value="BeamCannonTargetTracker"/>
        <TrackedUnitFilters value="-;Dead"/>
    </CValidatorCompareTrackedUnitsCount>

    <CBehaviorUnitTracker id="BeamCannonTargetTracker">
        <!-- <InfoFlags index="Hidden" value="1"/> -->
    </CBehaviorUnitTracker>
    
    <CEffectRemoveTrackedUnit id="BeamCannonTargetTrackerRTU">
        <BehaviorLink value="BeamCannonTargetTracker"/>
        <TrackerUnit Value="Caster"/>
        <TrackedUnit Value="Target"/>
    </CEffectRemoveTrackedUnit>

    <CEffectSet id="BeamCannonTargetTrackerSet">
        <EffectArray value="BeamCannonTargetTracker"/>
        <EffectArray value="BeamCannonTargetTrackerATU"/>
    </CEffectSet>
    <CEffectApplyBehavior id="BeamCannonTargetTracker">
        <Behavior value="BeamCannonTargetTracker"/>
    </CEffectApplyBehavior>
    <CEffectAddTrackedUnit id="BeamCannonTargetTrackerATU">
        <BehaviorLink value="BeamCannonTargetTracker"/>
        <TrackerUnit Value="Caster"/>
        <TrackedUnit Value="Target"/>
    </CEffectAddTrackedUnit>
</Catalog>
